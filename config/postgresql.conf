
# -----------------------------
# Connection & Authentication
# -----------------------------
listen_addresses = '*'          # Listen on all interfaces
port = 5432                     # Default port
max_connections = 100           # Typical default, adjust based on RAM/load
superuser_reserved_connections = 3

# -----------------------------
# Write Ahead Log (WAL) - CRITICAL FOR CDC
# -----------------------------
wal_level = logical             # Required for logical replication (CDC)
max_wal_senders = 10            # Max concurrent replication connections
max_replication_slots = 10      # Max replication slots

# -----------------------------
# Memory Tuning (Basic Production Baseline)
# -----------------------------
shared_buffers = 128MB          # Approx 25% of RAM is a good rule of thumb
work_mem = 4MB                  # Memory for sort/hash operations per query
maintenance_work_mem = 64MB     # Maintenance tasks (VACUUM, CREATE INDEX)

# -----------------------------
# Checkpoints & WAL
# -----------------------------
min_wal_size = 1GB
max_wal_size = 4GB
checkpoint_completion_target = 0.9

# -----------------------------
# Logging (Production Standard)
# -----------------------------
logging_collector = on
log_directory = 'pg_log'
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'
log_statement = 'ddl'           # Log DDL (CREATE, ALTER, DROP) - helpful for audit
log_min_duration_statement = 500 # Log queries slower than 500ms

# -----------------------------
# Locale & Formatting
# -----------------------------
datestyle = 'iso, mdy'
timezone = 'UTC'
lc_messages = 'en_US.utf8'
lc_monetary = 'en_US.utf8'
lc_numeric = 'en_US.utf8'
lc_time = 'en_US.utf8'

# -----------------------------
# Parallel Query
# -----------------------------
max_worker_processes = 8
max_parallel_workers_per_gather = 2
max_parallel_workers = 4
